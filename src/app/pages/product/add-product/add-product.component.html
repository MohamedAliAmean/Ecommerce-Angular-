<div class="container mx-auto px-4 py-8">
  <div class="max-w-2xl mx-auto">
    <h1 class="text-3xl font-bold mb-6">{{ isEditMode ? 'Edit Product' : 'Add New Product' }}</h1>

    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- Name -->
      <div>
        <label for="name" class="block text-sm font-medium text-gray-700">Product Name</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          [class.border-red-500]="submitted && f['name'].errors"
        >
        <div *ngIf="submitted && f['name'].errors" class="text-red-500 text-sm mt-1">
          <div *ngIf="f['name'].errors['required']">Name is required</div>
          <div *ngIf="f['name'].errors['minlength']">Name must be at least 3 characters</div>
        </div>
      </div>

      <!-- Description -->
      <div>
        <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
        <textarea
          id="description"
          formControlName="description"
          rows="3"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          [class.border-red-500]="submitted && f['description'].errors"
        ></textarea>
        <div *ngIf="submitted && f['description'].errors" class="text-red-500 text-sm mt-1">
          <div *ngIf="f['description'].errors['required']">Description is required</div>
          <div *ngIf="f['description'].errors['minlength']">Description must be at least 10 characters</div>
        </div>
      </div>

      <!-- Price -->
      <div>
        <label for="price" class="block text-sm font-medium text-gray-700">Price</label>
        <input
          type="number"
          id="price"
          formControlName="price"
          step="0.01"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          [class.border-red-500]="submitted && f['price'].errors"
        >
        <div *ngIf="submitted && f['price'].errors" class="text-red-500 text-sm mt-1">
          <div *ngIf="f['price'].errors['required']">Price is required</div>
          <div *ngIf="f['price'].errors['min']">Price must be greater than 0</div>
        </div>
      </div>

      <!-- Image URL -->
      <div>
        <label for="imageUrl" class="block text-sm font-medium text-gray-700">Image URL</label>
        <input
          type="url"
          id="imageUrl"
          formControlName="imageUrl"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          [class.border-red-500]="submitted && f['imageUrl'].errors"
        >
        <div *ngIf="submitted && f['imageUrl'].errors" class="text-red-500 text-sm mt-1">
          <div *ngIf="f['imageUrl'].errors['required']">Image URL is required</div>
          <div *ngIf="f['imageUrl'].errors['pattern']">Please enter a valid URL</div>
        </div>
      </div>

      <!-- Category -->
      <div>
        <label for="category" class="block text-sm font-medium text-gray-700">Category</label>
        <select
          id="category"
          formControlName="category"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          [class.border-red-500]="submitted && f['category'].errors"
        >
          <option value="">Select a category</option>
          <option value="Electronics">Electronics</option>
          <option value="Clothing">Clothing</option>
          <option value="Books">Books</option>
          <option value="Home">Home</option>
        </select>
        <div *ngIf="submitted && f['category'].errors" class="text-red-500 text-sm mt-1">
          <div *ngIf="f['category'].errors['required']">Category is required</div>
        </div>
      </div>

      <!-- Stock -->
      <div>
        <label for="stock" class="block text-sm font-medium text-gray-700">Stock</label>
        <input
          type="number"
          id="stock"
          formControlName="stock"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          [class.border-red-500]="submitted && f['stock'].errors"
        >
        <div *ngIf="submitted && f['stock'].errors" class="text-red-500 text-sm mt-1">
          <div *ngIf="f['stock'].errors['required']">Stock is required</div>
          <div *ngIf="f['stock'].errors['min']">Stock must be greater than 0</div>
        </div>
      </div>

      <!-- Buttons -->
      <div class="flex justify-end space-x-4">
        <button
          type="button"
          (click)="navigateToManage()"
          class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"
        >
          Cancel
        </button>
        <button
          type="submit"
          class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
        >
          {{ isEditMode ? 'Update Product' : 'Add Product' }}
        </button>
      </div>
    </form>
  </div>
</div>
